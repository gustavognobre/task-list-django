<div>
  {% if request.user.is_authenticated %}
  <p>Bem-vindo, <strong>{{ request.user }}</strong>!</p>
  <form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button type="submit">Sair</button>
  </form>
  {% else %}
  <a href="{% url 'login' %}">Entrar</a>
  {% endif %}
</div>

<hr />

<h1>Minha Lista de Tarefas</h1>
<a href="{% url 'task-create' %}">+ Adicionar Tarefa</a>

<form method="GET">
  <div>
    <label for="search-area">Pesquisar:</label>
    <input type="text" id="search-area" name="search-area" value="{{ search_input }}" placeholder="Pesquise sua tarefa" />
  </div>
  <div>
    <label for="filter-completed">Filtrar:</label>
    <select id="filter-completed" name="filter-completed">
      <option value="">Todas</option>
      <option value="completed" {% if filter_completed == 'completed' %}selected{% endif %}>Completas</option>
      <option value="pending" {% if filter_completed == 'pending' %}selected{% endif %}>Pendentes</option>
    </select>
  </div>
  <div>
    <button type="submit">Filtrar</button>
  </div>
</form>

<hr />

<table>
  <thead>
    <tr>
      <th>Tarefa</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
    <tr>
      <td>{{ task.title }}</td>
      <td>
        <a href="{% url 'task' task.id %}">Visualizar</a> |
        <a href="{% url 'task-update' task.id %}">Editar</a> |
        <a href="{% url 'task-delete' task.id %}">Deletar</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="2">Sem itens na lista</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
